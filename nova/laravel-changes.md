# Laravel Changes for Nova 3

Nova NextGen has unique requirements that require a very particular file structure and setup. Out of the box, Laravel 5 doesn't support these requirements and many changes have been made to ensure Nova NextGen works the way we intend it to. This file describes the changes that have been made to this instance of Laravel 5 to make it work like we want.

- Update `bootstrap/autoload.php` to point to the Composer autoload file in the `nova/vendor` directory
- Update the `vendor` path for the autoload file
- Update the path to the compiled classes file
- Update the `artisan` file with the new bootstrap path
- Update creating the new application instance to take into account we're no longer at the root w/ the bootstrap directory
- Add an `Application` class in Nova/Foundation
	- Update the `bootstrap/app.php` file with the new class
- Update `app/Http/Kernel.php` to replace the `LoadConfiguration` class
	- Add `LoadConfiguration` class to Nova
	- Override `Kernel::bootstrappers()` to make sure we're using the Nova version of `LoadConfiguration`
	- Bind our own `LoadConfiguration` class to the contract for `LoadConfiguration`
- Update the path to the views folder in the view config file
- Update `phpunit.xml` with correct paths
- Update singleton references in `nova/bootstrap/app.php`
- Update references to `App` namespace
- Bind our own `RouteCacheCommand` class in the `Console\Kernel` class
- Moved
	- `robots.txt` to the root
	- `.htaccess` to the root
	- `resources/` to `nova/resources/`
	- `database/` to `nova/src/Nova/Setup/database/`
	- `bootstrap/` to `nova/bootstrap/`
	- `tests/` to `nova/tests/`
	- Config files from `config/` to `nova/config/`
- Added
	- `assets/`
	- `extensions/`
	- `nova/`
	- `ranks/`
	- `themes/`
	- `LICENSE`
	- `.gitignore`
	- `.editorconfig`
- Removed
	- `app/`
	- `public/`
	- `phpspec.yml`
	- `gulpfile.js`
	- `package.json`
- `index.php`
	- Move to the root
	- Update with correct paths
	- Update to point to the bootstrap files in `nova/bootstrap`
	- Update to always use the `storage` directory instead of trying to use `vendor`
- `composer.json`
	- Update with the `Nova` PSR-4 namespace
	- Update config to set the vendor directory to `nova/vendor/`
	- Update with the Extensions namespace
	- Removed the `App` PSR-4 namespace
- Application class
	- Update `Application::bindPathsInContainer`
		- Nova config path
		- Asset path
		- Nova asset path
		- Extensions path
		- Themes path
		- Ranks path
	- Add methods
		- `coreConfigPath()`
		- `assetPath()`
		- `coreAssetPath()`
		- `extensionPath()`
		- `themePath()`
		- `rankPath()`
	- Update methods
		- `langPath()` points to `nova/lang`
		- `databasePath()` points to `nova/src/Setup/database`
		- `getCachedServicesPath()` points to `nova/vendor`
		- `getCachedCompilePath()` points to `nova/vendor`
		- `getCachedRoutesPath()` points to `nova/vendor`
		- `getCachedConfigPath()` points to `nova/vendor`
		- `vendorIsWritableForOptimizations()` points to `nova/vendor`
	- Update `Application::path` to account for the removed `app` directory
